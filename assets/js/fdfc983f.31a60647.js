"use strict";(self.webpackChunktitan_shoulders=self.webpackChunktitan_shoulders||[]).push([[9160],{5018:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"JavaScript/javascript_event-loop","title":"Event Loop (\u4e8b\u4ef6\u5faa\u74b0)","description":"Event Loop","source":"@site/docs/JavaScript/javascript_event-loop.md","sourceDirName":"JavaScript","slug":"/JavaScript/javascript_event-loop","permalink":"/titan-shoulders/docs/JavaScript/javascript_event-loop","draft":false,"unlisted":false,"editUrl":"https://github.com/Hsing0224/titan-shoulders/tree/master/docs/JavaScript/javascript_event-loop.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11,"description":"Event Loop"},"sidebar":"tutorialSidebar","previous":{"title":"JavaScript \u7684\u90a3\u4e9b\u89c0\u5ff5","permalink":"/titan-shoulders/docs/JavaScript/javascript_tip"},"next":{"title":"\u904b\u7b97\u5f0f\u8207\u904b\u7b97\u5b50","permalink":"/titan-shoulders/docs/JavaScript/javascript_expressions-and-operators"}}');var i=n(4848),o=n(8453);const l={sidebar_position:11,description:"Event Loop"},a="Event Loop (\u4e8b\u4ef6\u5faa\u74b0)",r={},c=[{value:"\u5404\u4f5c\u7528\u89e3\u91cb",id:"\u5404\u4f5c\u7528\u89e3\u91cb",level:2},{value:"\u55ae\u4e00\u57f7\u884c\u7dd2 (single-threaded)",id:"\u55ae\u4e00\u57f7\u884c\u7dd2-single-threaded",level:3},{value:"\u5806\u758a (Stack)",id:"\u5806\u758a-stack",level:3},{value:"Web APIs",id:"web-apis",level:3},{value:"\u4f47\u5217 (Queue)",id:"\u4f47\u5217-queue",level:3},{value:"\u963b\u585e (blocking)",id:"\u963b\u585e-blocking",level:3},{value:"\u6d41\u7a0b\u63cf\u8ff0",id:"\u6d41\u7a0b\u63cf\u8ff0",level:2},{value:"\u7bc4\u4f8b",id:"\u7bc4\u4f8b",level:2},{value:"\u5716\u89e3",id:"\u5716\u89e3",level:3},{value:"Reference",id:"reference",level:2}];function d(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"event-loop-\u4e8b\u4ef6\u5faa\u74b0",children:"Event Loop (\u4e8b\u4ef6\u5faa\u74b0)"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"http://latentflip.com/loupe/",children:"Event Loop \u7684\u8996\u89ba\u5316\u5448\u73fe"})}),"\n",(0,i.jsx)(t.h2,{id:"\u5404\u4f5c\u7528\u89e3\u91cb",children:"\u5404\u4f5c\u7528\u89e3\u91cb"}),"\n",(0,i.jsx)(t.h3,{id:"\u55ae\u4e00\u57f7\u884c\u7dd2-single-threaded",children:"\u55ae\u4e00\u57f7\u884c\u7dd2 (single-threaded)"}),"\n",(0,i.jsx)(t.p,{children:"JavaScript \u662f\u55ae\u4e00\u57f7\u884c\u7dd2\uff0c\u9867\u540d\u601d\u7fa9\u5c31\u662f\u4e00\u500b\u6642\u9593\u9ede\u53ea\u80fd\u505a\u4e00\u4ef6\u4e8b\u3002"}),"\n",(0,i.jsx)(t.h3,{id:"\u5806\u758a-stack",children:"\u5806\u758a (Stack)"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"\u5f8c\u9032\u5148\u51fa (Last In, First Out\uff0cLIFO)"}),"\n",(0,i.jsx)(t.li,{children:"\u6bcf\u6b21\u547c\u53eb\u4e00\u500b\u51fd\u5f0f\uff0c\u8a72\u51fd\u5f0f\u6703\u88ab\u5806\u758a\u5230\u6700\u9802\u7aef\uff1b\u7576\u57f7\u884c\u5b8c\u7562\u6642\uff0c\u8a72\u51fd\u5f0f\u6703\u5f9e\u5806\u758a\u4e2d\u79fb\u51fa\u3002"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"web-apis",children:"Web APIs"}),"\n",(0,i.jsxs)(t.p,{children:["\u7576 Web APIs \u6709\u4e8b\u4ef6\u5b8c\u6210\u5f8c\uff0c\u5247\u6703\u5c07 frame \u79fb\u81f3 Queue\u3002",(0,i.jsx)("br",{}),"\n\u4e3b\u8981\u4efb\u52d9\u6709\uff1a"]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"\u767c\u9001\u7db2\u8def\u8acb\u6c42 (XMLHttpRequest)"}),"\n",(0,i.jsx)(t.li,{children:"\u8a08\u6642\u5668 (Timer)"}),"\n",(0,i.jsx)(t.li,{children:"\u4e8b\u4ef6\u8655\u7406 (Event Listener)"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"\u4f47\u5217-queue",children:"\u4f47\u5217 (Queue)"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"\u5148\u9032\u5148\u51fa (First In, First Out\uff0cFIFO)"}),"\n",(0,i.jsx)(t.li,{children:"\u7ba1\u7406\u975e\u540c\u6b65\u4efb\u52d9\u3002\u4f8b\u5982\uff1a setTimeout \u3001 ajax"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"\u963b\u585e-blocking",children:"\u963b\u585e (blocking)"}),"\n",(0,i.jsxs)(t.p,{children:["\u963b\u585e\u901a\u5e38\u767c\u751f\u5728",(0,i.jsx)(t.strong,{children:"\u540c\u6b65"}),"\u7684\u64cd\u4f5c\u4e0a\u3002",(0,i.jsx)("br",{}),"\n\u7576 JavaScript Runtime \u6642\uff0c\u6703\u57f7\u884c\u5728 Stack \u88e1\u7684\u7a0b\u5f0f\u78bc\u7247\u6bb5\u3002",(0,i.jsx)("br",{}),"\n\u800c\u842c\u4e00\u7a0b\u5f0f\u78bc\u7247\u6bb5\u57f7\u884c\u6642\u9593\u904e\u4e45\uff0c\u5176\u4ed6\u4efb\u52d9\u7121\u6cd5\u88ab\u57f7\u884c\uff0c\u9032\u800c\u9020\u6210\u700f\u89bd\u5668\u505c\u6b62\u6e32\u67d3\uff0c\u4f7f\u7528\u8005\u611f\u53d7\u5230\u5361\u9813\u6216\u51cd\u7d50\u3002\u9020\u6210\u700f\u89bd\u9ad4\u9a57\u4e0d\u4f73\u3002"]}),"\n",(0,i.jsx)(t.h2,{id:"\u6d41\u7a0b\u63cf\u8ff0",children:"\u6d41\u7a0b\u63cf\u8ff0"}),"\n",(0,i.jsx)(t.p,{children:"Event Loop \u7684\u4efb\u52d9\u662f\u5982\u679c Stack \u662f\u7a7a\u7684\uff0c\u5c31\u628a Queue \u4e2d\u7684 frame \u653e\u5230 Stack \u4e2d\uff0c\u76f4\u5230 Stack \u548c Queue \u90fd\u662f\u7a7a\u7684\u70ba\u6b62\u3002"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Event Loop \u5de5\u4f5c\u6d41\u7a0b\u5716",src:n(684).A+"",width:"380",height:"355"})}),"\n",(0,i.jsxs)(t.p,{children:["\u7576\u9801\u9762\u8f09\u5165\uff0cJavaScript Runtime \u6642\uff0c\u6703\u4f9d\u7167\u64b0\u5beb\u7684\u7a0b\u5f0f\u78bc\uff0c\u7531\u4e0a\u5230\u4e0b\u4f9d\u5e8f\u57f7\u884c\u4e0b\u4f86\uff0c\u4e00\u500b\u7a0b\u5f0f\u78bc\u5340\u584a\u5247\u70ba\u4e00\u500b frame\uff0c\u6703\u5148\u653e\u5165 Call Stack\u3002",(0,i.jsx)("br",{}),"\n\u5982\u679c\u9019\u500b frame \u662f ",(0,i.jsx)(t.strong,{children:"XMLHttpRequest"})," \u3001 ",(0,i.jsx)(t.strong,{children:"Timer"})," \u3001 ",(0,i.jsx)(t.strong,{children:"Event Listener"}),"\uff0c\u5247\u6703\u5f9e Stack \u5148\u79fb\u5230 Web APIs\uff0c\u4e26\u7e7c\u7e8c\u57f7\u884c Stack \u88e1\u7684 frame\u3002",(0,i.jsx)("br",{}),"\n\u7136\u800c\u5982\u679c\u5728 Stack \u88e1\u7684\u7a0b\u5f0f\u78bc\u56e0\u70ba\u7b49\u5f85\u6642\u9593\u904e\u4e45\uff0c\u5247\u6703\u9020\u6210 ",(0,i.jsx)(t.strong,{children:"blocking\u3002"}),(0,i.jsx)("br",{}),"\n\u7576 Web APIs \u8655\u7406\u5b8c\uff0c\u5247\u6703\u5c07 frame \u79fb\u81f3 Queue \u5b58\u653e\u3002",(0,i.jsx)("br",{}),"\n\u7576 Stack \u7684 frame \u90fd\u57f7\u884c\u5b8c\u6210\u5f8c\uff0cEvent loop \u6703\u5c07 Queue \u7684 frame \u79fb\u81f3 Stack \u88e1\u53bb\u57f7\u884c\u3002",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(t.strong,{children:"\u76f4\u5230 Stack \u548c Queue \u90fd\u70ba\u7a7a"}),"\u3002"]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["\u9019\u6a23\u7684\u6d41\u7a0b\u53ef\u4ee5\u77e5\u9053\uff0c\u7576 Web APIs \u5728 setTimeout \u6240\u8a2d\u5b9a\u7684\u79d2\u6578\u5f8c\uff0c\u5c07\u5176\u5167\u5bb9\u653e\u5165 Queue\u3002\u4e0d\u662f\u79d2\u6578\u5230\u5c31",(0,i.jsx)(t.strong,{children:"\u7acb\u5373\u57f7\u884c"}),"\uff0c\u800c\u662f",(0,i.jsx)(t.strong,{children:"\u5373\u5c07\u88ab\u57f7\u884c"})]})}),"\n",(0,i.jsx)(t.h2,{id:"\u7bc4\u4f8b",children:"\u7bc4\u4f8b"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:'console.log("Start");\n\nfunction blockForAWhile() {\n  const startTime = new Date().getTime();\n  while (new Date().getTime() - startTime < 5000) {}\n}\n\ndocument.querySelector("button").addEventListener("click", function onClick() {\n  setTimeout(function () {\n    console.log("button click");\n  }, 1000);\n});\n\nblockForAWhile();\n// \u57f7\u884c blockForAWhile() \u6642\uff0c\u6309\u4e0b button\n\nsetTimeout(function setTimeout2s() {\n  console.log("setTimeout 2s");\n}, 2000);\n\nsetTimeout(function setTimeoutZero() {\n  console.log("setTimeout 0");\n}, 0);\n\nconsole.log("End");\n\n/* \u6700\u5f8c\u8f38\u51fa\u7684 log\nStart\nEnd\nsetTimeout 0\nbutton click\nsetTimeout 2s\n*/\n'})}),"\n",(0,i.jsx)(t.h3,{id:"\u5716\u89e3",children:"\u5716\u89e3"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\u5370\u51fa Start\n",(0,i.jsx)(t.img,{alt:"\u5370\u51fa Start",src:n(5842).A+"",width:"1116",height:"509"}),(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(t.li,{children:["button \u76e3\u807d\u4e8b\u4ef6\u8f49\u4ea4 Web APIs\n",(0,i.jsx)(t.img,{alt:"button \u76e3\u807d\u4e8b\u4ef6\u8f49\u4ea4 Web APIs",src:n(6809).A+"",width:"1116",height:"505"}),(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(t.li,{children:["\u57f7\u884c blockForWhile()\n",(0,i.jsx)(t.img,{alt:"\u57f7\u884c blockForWhile()",src:n(2336).A+"",width:"1116",height:"505"}),(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(t.li,{children:["\u6a21\u64ec blocking\uff0c\u4e26\u6309\u4e0b button \u89f8\u767c\u4e8b\u4ef6\n",(0,i.jsx)(t.img,{alt:"\u6a21\u64ec blocking\uff0c\u4e26\u6309\u4e0b button \u89f8\u767c\u4e8b\u4ef6",src:n(3663).A+"",width:"1127",height:"505"}),(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(t.li,{children:["\u9047\u5230 setTimeout\uff0c\u8f49\u4ea4 Web APIs\n",(0,i.jsx)(t.img,{alt:"\u9047\u5230 setTimeout\uff0c\u8f49\u4ea4 Web APIs",src:n(6726).A+"",width:"1116",height:"505"}),(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(t.li,{children:["\u6a21\u64ec\u9047\u5230\u79d2\u6578\u70ba 0 \u7684 setTimeout\n",(0,i.jsx)(t.img,{alt:"\u6a21\u64ec\u9047\u5230\u79d2\u6578\u70ba 0 \u7684 setTimeout",src:n(701).A+"",width:"1116",height:"505"}),(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(t.li,{children:["\u5370\u51fa End\n",(0,i.jsx)(t.img,{alt:"\u5370\u51fa End",src:n(6804).A+"",width:"1116",height:"509"}),(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(t.li,{children:["Stack \u7121 frame\uff0c\u5f9e Queue \u62ff frame \u4f86\u57f7\u884c\n",(0,i.jsx)(t.img,{alt:"Stack \u7121 frame\uff0c\u5f9e Queue \u62ff frame \u4f86\u57f7\u884c",src:n(7027).A+"",width:"1116",height:"505"}),(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(t.li,{children:["setTimeout \u8dd1\u5b8c\u4e1f\u5230 Queue\uff0c\u518d\u88ab Event Loop \u62c9\u81f3 Stack \u57f7\u884c\n",(0,i.jsx)(t.img,{alt:"setTimeout \u8dd1\u5b8c\u4e1f\u5230 Queue\uff0c\u518d\u88ab Event Loop \u62c9\u81f3 Stack \u57f7\u884c",src:n(2922).A+"",width:"1116",height:"505"}),"\n",(0,i.jsx)(t.img,{alt:"setTimeout \u8dd1\u5b8c\u4e1f\u5230 Queue\uff0c\u518d\u88ab Event Loop \u62c9\u81f3 Stack \u57f7\u884c",src:n(2616).A+"",width:"1116",height:"505"}),"\n",(0,i.jsx)(t.img,{alt:"setTimeout \u8dd1\u5b8c\u4e1f\u5230 Queue\uff0c\u518d\u88ab Event Loop \u62c9\u81f3 Stack \u57f7\u884c",src:n(1009).A+"",width:"1116",height:"505"})]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"reference",children:"Reference"}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.a,{href:"http://latentflip.com/loupe/",children:"event loop - loupe"}),(0,i.jsx)("br",{}),(0,i.jsx)(t.a,{href:"https://dev.to/lydiahallie/javascript-visualized-event-loop-3dif",children:"JavaScript Visualized: Event Loop - Lydia Hallie"}),(0,i.jsx)("br",{}),(0,i.jsx)(t.a,{href:"https://www.javascripttutorial.net/javascript-event-loop/",children:"JavaScript Event Loop - JavaScript Tutorial Website"})]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},5842:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_1-404690f89acb9962e48064014f99c0e1.png"},2616:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_10-22456e57a01931f2b089940f555a3a8a.png"},1009:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_11-9cb2acd11248a11f0c4532b5a230be67.png"},6809:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_2-eed0a30131211ef7930401be861fd36b.png"},2336:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_3-9545775e654e5233e219913a0d47cc7d.png"},3663:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_4-9f3e1ce13e909a731aafe8043d6af4b3.png"},6726:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_5-5f700b3aea3076836762cf157fd7d80a.png"},701:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_6-e7ce0f3fb502a4fe0c000f38031e4be4.png"},6804:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_7-4f954d7aa036a1e694f455c50354e50a.png"},7027:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_8-f067ef07c14e66a92e8d73a182e6199e.png"},2922:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_9-fd6d04c4834202e8dddf5bcd02ed59ae.png"},684:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/event-loop_flow_view-3a56a949934dfbdcf6f75f3d205c9b10.jpg"},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var s=n(6540);const i={},o=s.createContext(i);function l(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);